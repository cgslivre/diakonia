{"version":3,"sources":["MembroModule.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app-membro-module.min.js","sourcesContent":["var app = angular.module('membrosRecord', ['ngMessages','ngSanitize','ui.mask','remoteValidation', 'ngResource', 'comum','ngTagsInput'])\n  .config(['$interpolateProvider', function ($interpolateProvider) {\n      $interpolateProvider.startSymbol('<%');\n      $interpolateProvider.endSymbol('%>');\n}]);\n\napp.controller('membrosIndexController', ['$scope', '$http', '$resource',\n  function ($scope, $http, $resource) {\n    $scope.membros = [];\n\n    var regioes = $resource('/regioes');\n    console.log( regioes.query() );\n\n    $http.get(\"/membro\").success(function(data) {\n        $scope.membros = data;\n    });\n\n    $scope.userShowLink = function( membro ){\n        return window.location.origin + '/membro/' + membro + '/edit';\n\t};\n\n    $scope.avatarPathSmall = function( avatar, sexo ){\n        if ( avatar === null ){\n            if( sexo == 'F'){\n                return window.location.origin + '/img/membro/000-default-mulher-70px.jpg';\n            } else{\n                return window.location.origin + '/img/membro/000-default-homem-70px.jpg';\n            }\n        } else{\n            return window.location.origin  + '/' + avatar + '70px.jpg';\n        }\n\t};\n\n    $scope.ordenarPor = function( campo ){\n\t\t$scope.criterioDeOrdenacao = campo;\n\t\t$scope.direcaoDaOrdenacao = !$scope.direcaoDaOrdenacao;\n\t};\n\n    $scope.loadTags = function(query) {\n        return $http.get('/regioes', {cache: true}).then( function(response){\n            var regioes = response.data;\n            return regioes.filter(\n                function( regiao ){\n                    return regiao.nome.toLowerCase().indexOf(query.toLowerCase()) != -1;\n                });\n            });\n    };\n\n    $scope.validarTag = function( $tag ){\n        if (typeof $tag.id != 'undefined'){\n            return true;\n        } else{\n            return false;\n        }\n        \n    }\n\n}]);\n\n\n\napp.controller('membroCreateCtrl', ['$scope', '$http', '$location',\n  function ($scope, $http,$location) {\n    $scope.button = \"Cadastrar Membro\";\n    $scope.edit = false;\n\n    $http.get(\"/membro/grupo-caseiro/lista\").success(function(data) {\n        $scope.grupos = data;\n    });\n\n    $http.get(\"/regioes\").success(function(data) {\n        $scope.regioes = data;\n    });\n    $scope.membro = {};\n    $scope.membro.avatar_path = '/img/membro/000-default-homem-70px.jpg';\n\n\n  }\n]);\n\napp.controller('membroEditCtrl', ['$scope', '$http', '$location',\n  function ($scope, $http,$location) {\n    $scope.button = \"Atualizar Membro\";\n    $scope.edit = true;\n\n    $http.get(\"/membro/grupo-caseiro/lista\").success(function(data) {\n        $scope.grupos = data;\n    });\n\n    $http.get(\"/regioes\").success(function(data) {\n        $scope.regioes = data;\n    });\n\n    $scope.membro = {};\n    $scope.membro.nome = post['nome'];\n    $scope.membro.grupo_caseiro_id = post['grupo_caseiro_id'];\n    $scope.membro.sexo = post['sexo'];\n    var dia = moment(post['data_nascimento']).format('D/M/YYYY');\n    $scope.membro.data_nascimento = dia;\n\n    var avatar = post['avatar_path'];\n    if( avatar == null ){\n        $scope.membro.avatar_path = $scope.membro.sexo == 'M' ?\n            '/img/membro/000-default-homem-70px.jpg' : '/img/membro/000-default-mulher-70px.jpg';\n    }\n    $scope.membro.regiao = post['regiao'];\n    $scope.membro.endereco = post['endereco'];\n    $scope.membro.email = post['email'];\n    $scope.membro.telefones = post['telefones_json'];\n\n  }\n]);\n\n\n$(function(){\n\t$(document.body).on('click', '.changeType' ,function(){\n\t\t$(this).closest('.phone-input').find('.type-text').text($(this).text());\n\t\t$(this).closest('.phone-input').find('.type-input').val($(this).data('type-value'));\n\t});\n\n\t$(document.body).on('click', '.btn-remove-phone' ,function(){\n\t\t$(this).closest('.phone-input').remove();\n\t});\n\n\t$('.btn-add-phone').click(function(){\n\t\tvar index = $('.phone-input').length + 1;\n\n\t\t$('.phone-list').append(''+\n\t\t\t\t'<div class=\"input-group phone-input\">'+\n\t\t\t\t\t'<span class=\"input-group-btn\">'+\n\t\t\t\t\t\t'<button type=\"button\" class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\"><span class=\"type-text\">Tipo:</span> <span class=\"caret\"></span></button>'+\n\t\t\t\t\t\t'<ul class=\"dropdown-menu\" role=\"menu\">'+\n\t\t\t\t\t\t\t'<li><a class=\"changeType\" href=\"javascript:;\" data-type-value=\"celular\">Celular</a></li>'+\n\t\t\t\t\t\t\t'<li><a class=\"changeType\" href=\"javascript:;\" data-type-value=\"residencial\">Residencial</a></li>'+\n\t\t\t\t\t\t\t'<li><a class=\"changeType\" href=\"javascript:;\" data-type-value=\"comercial\">Comercial</a></li>'+\n\t\t\t\t\t\t'</ul>'+\n\t\t\t\t\t'</span>'+\n\t\t\t\t\t'<input type=\"text\" name=\"telefone['+index+'][numero]\" class=\"form-control\" placeholder=\"99999 9999\" />'+\n\t\t\t\t\t'<input type=\"hidden\" name=\"telefone['+index+'][tipo]\" class=\"type-input\" value=\"\" />'+\n\t\t\t\t\t'<span class=\"input-group-btn\">'+\n\t\t\t\t\t\t'<button class=\"btn btn-danger btn-remove-phone\" type=\"button\"><span class=\"glyphicon glyphicon-remove\"></span></button>'+\n\t\t\t\t\t'</span>'+\n\t\t\t\t'</div>'\n\t\t);\n\t});\n});\n"]}